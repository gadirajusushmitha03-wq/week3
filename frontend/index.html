
<!DOCTYPE html>
<html>
<head>
  <title>SecureCollab Demo</title>
  <script src="https://cdn.jsdelivr.net/npm/sockjs-client/dist/sockjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/stompjs/lib/stomp.min.js"></script>
</head>
<body>
<h2>SecureCollab â€“ Encrypted Chat Demo</h2>
<input id="msg" placeholder="Encrypted message"/>
<button onclick="send()">Send</button>
<ul id="chat"></ul>

<script>
let stomp;
const socket = new SockJS('http://localhost:8082/ws');
stomp = Stomp.over(socket);
stomp.connect({}, () => {
  stomp.subscribe('/topic/messages', m => {
    const li = document.createElement('li');
    li.innerText = m.body;
    document.getElementById('chat').appendChild(li);
  });
});

function send(){
  stomp.send("/app/chat.send", {}, document.getElementById('msg').value);
}
</script>
</body>
</html>
